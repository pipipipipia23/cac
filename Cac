getgenv().chestselect = {"World Yellow Lucky Block", "World Blue Lucky Block", "World Pink Lucky Block", "World Rainbow Lucky Block"} -- "World Yellow Lucky Block", "World Blue Lucky Block", "World Pink Lucky Block", "World Rainbow Lucky Block" (support lucky area block)
_G.vitribanchon = 1 -- 1->5 (only lucky area)
getgenv().farmabcxyz = "double" -- single
getgenv().methoddoimap = "So Luong Fruit" -- Check Theo Thoi Gian ( day la method doi map)
getgenv().areafarm1 = "Pixel Vault" -- Pixel Vault
getgenv().timemap1 = 300 -- Min, hoac so luong fruit
getgenv().areafarm2 = "Mystic Mine"
getgenv().timemap2 = 3000 -- Min, hoac so luong fruit
getgenv().tgianne = 1
if not game:IsLoaded() then game.Loaded:Wait() end
repeat wait() until game.Players
repeat wait() until game.Players.LocalPlayer
repeat wait() until game.ReplicatedStorage
repeat wait() until game:GetService("Players").LocalPlayer:FindFirstChild("PlayerGui")
repeat wait() until game:GetService("Players").LocalPlayer.PlayerGui:FindFirstChild("Main")
repeat wait() until game:GetService("Players").LocalPlayer.PlayerGui.Main.Right
repeat wait() until game:GetService("Workspace"):FindFirstChild("__MAP")
local vu = game:GetService("VirtualUser")
game:GetService("Players").LocalPlayer.Idled:connect(function()
    vu:Button2Down(Vector2.new(0,0),workspace.CurrentCamera.CFrame)
    wait(1)
    vu:Button2Up(Vector2.new(0,0),workspace.CurrentCamera.CFrame)
end)
local Client = require(game.ReplicatedStorage.Library.Client)
getrenv().require = getgenv().require -- method tvk hihi (iu tvk vcl)
local v1 = require(game.ReplicatedStorage:WaitForChild("Framework"):WaitForChild("Library"))
debug.setupvalue(Client.Network.Invoke, 1, function() return true end)
debug.setupvalue(Client.Network.Fire, 1, function() return true end)
v1.WorldCmds.CanDoAction = function() return true end
local hihi = getsenv(game:GetService("Players").LocalPlayer.PlayerScripts.Scripts.GUIs.Teleport)
local plr = game.Players.LocalPlayer
function getdafarm()
    return #Client.PetCmds.GetEquipped()
end
getgenv().petsimz = {}

function tablefind(a,b)
    if table.find(a,b) then
        return true
    end
    return false
end

function autoupdate2()
    local tickne = tick()
    getgenv().petsimz = {}
    getgenv().blacklistchest = {}
    getgenv().tablemacdinhhjhj = {}
    getgenv().blacklistpet = {}
    getgenv().petcanfarm = {}
    for i,v in pairs(Client.Network.Invoke('Get Coins')) do
        if v.a == getgenv().mapdefault then
            getgenv().tablemacdinhhjhj[i] = v
        end
    end
    getgenv().asdawdz = {}
    for i,v in pairs(Client.PetCmds.GetEquipped()) do
        getgenv().asdawdz[i] = v
    end
    for i,v in pairs(getgenv().asdawdz) do
        for i1,v1 in pairs(getgenv().tablemacdinhhjhj) do
            if tablefind(v1.petsFarming, v.uid) then
                table.insert(getgenv().blacklistpet, v.uid)
            end
        end
    end
    for i,v in pairs(getgenv().asdawdz) do
        if not tablefind(getgenv().blacklistpet, v.uid) then
            table.insert(getgenv().petcanfarm, v.uid)
        end
    end
    for i, v in pairs(getgenv().petcanfarm) do
        local blacklistInserted = false
        for i1, v1 in pairs(getgenv().tablemacdinhhjhj) do
            if v1.mh > v1.h then
                if not blacklistInserted and tablefind(getgenv().blacklistchest, i1) == false then
                    getgenv().petsimz[v] = i1
                    table.insert(getgenv().blacklistchest, i1)
                    blacklistInserted = true
                end
            else
                if not blacklistInserted and tablefind(getgenv().blacklistchest, i1) == false then
                    getgenv().petsimz[v] = i1
                    table.insert(getgenv().blacklistchest, i1)
                    blacklistInserted = true
                end
            end
        end
    end
    if #getgenv().blacklistchest > 100 then
        getgenv().blacklistchest = {}
    end
    return getgenv().petsimz
end

local vitrilucky = {
    ["1"] = CFrame.new(-278.0175476074219, 280.28961181640625, 1582.909423828125),
    ["2"] = CFrame.new(-142.0844268798828, 205.1637420654297, 1621.3187255859375),
    ["3"] = CFrame.new(-41.142391204833984, 190.16372680664062, 1540.5394287109375),
    ["4"] = CFrame.new(-318.45367431640625, 255.66372680664062, 1383.4219970703125),
    ["5"] = CFrame.new(-186.7466583251953, 205.16372680664062, 1393.80029296875),
}

function teleportto(texta)
    print(hihi.Teleport(texta,true))
end

function aasda()
    if getgenv().mapdefault == "Lucky Block Area" then
        local v17 = v1.Directory.Areas[getgenv().mapdefault]
		if v1.WorldCmds.Get() ~= v17.world then
			teleportto(getgenv().mapdefault)
        else
            plr.Character.HumanoidRootPart.CFrame = vitrilucky[tostring(_G.vitribanchon)]
		end
        for i,v in pairs(autoupdate2()) do
            Client.Network.Invoke('Join Coin', v, {i})
            Client.Network.Fire('Farm Coin', v, i)
        end
    else
        teleportto(getgenv().mapdefault)
        for i,v in pairs(autoupdate2()) do
            Client.Network.Invoke('Join Coin', v, {i})
            Client.Network.Fire('Farm Coin', v, i)
        end
    end
end

local itemboost = {
    "Triple Coins",
    "Triple Damage",
    "Super Lucky",
    "Ultra Lucky"
}

function getboost()
    local v48 = v1.Save.Get();
    for i,v in pairs(v48.BoostsInventory) do
        if tonumber(v) ~= 0 then
            Client.Network.Fire("Activate Boost",i)
        end
    end
end

spawn(function()
    while true do wait(.2)
        local a,b = pcall(getboost)
    end
end)

spawn(function()
    while true do wait(getgenv().tgianne)
        local a,b = pcall(aasda)
        print(a,b)
    end
end)

function checkfruit()
    local v1 = require(game.ReplicatedStorage:WaitForChild("Framework"):WaitForChild("Library"));
    soluong = 0
    for i,v in pairs(v1.Save.Get().Fruits) do
        soluong = soluong + v.Amount
    end
    return soluong
end
spawn(function()
    while true do wait()
        if getgenv().farmabcxyz == "double" then
            if getgenv().methodchange = "So Luong Fruit" then
                if checkfruit() < getgenv().timemap1 or (checkfruit() > getgenv().timemap1 and checkfruit() < getgenv().timemap2) then
                    getgenv().mapdefault = getgenv().areafarm1
                elseif checkfruit() >= getgenv().timemap2 then
                    getgenv().mapdefault = getgenv().areafarm2
                end
            else
                local map1 = tick()
                repeat wait()
                    getgenv().mapdefault = getgenv().areafarm1
                until tick() - map1 >= getgenv().timemap1 * 60
                local map2 = tick()
                repeat wait()
                    getgenv().mapdefault = getgenv().areafarm2
                until tick() - map2 >= getgenv().timemap1 * 60
            end
        else
            getgenv().mapdefault = getgenv().areafarm1
        end
    end
end)


local Orbs = getsenv(game.Players.LocalPlayer.PlayerScripts.Scripts.Game.Orbs)
local Lootbags = getsenv(game.Players.LocalPlayer.PlayerScripts.Scripts.Game.Lootbags)

workspace.__THINGS.Orbs.ChildAdded:Connect(function(v)
    pcall(function()
        Orbs.Collect(v)
    end)
end)

workspace.__THINGS.Lootbags.ChildAdded:Connect(function(v)
    pcall(function()
        Lootbags.Collect(v)
    end)
end)
